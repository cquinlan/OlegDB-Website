<!DOCTYPE html><html><head><title>OlegDB - Website Credits</title><meta charset="UTF-8"><meta name=viewport content="width=device-width, initial-scale=1"><link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'><link rel="stylesheet" media="all" href="/static/css/simplegrid.css" /><link rel="stylesheet" media="all" href="/static/css/main.css" /><link rel="stylesheet" media="(max-width: 800px)" href="/static/css/mobile.css" /></head><body><header><div class="grid grid-pad"><div id="logo_col" class="col-1-12"><div class="content"><img src="/static/img/oleg_logo.svg"></img></div></div><div class="col-5-12"><div class="content"><h1><a href="/">OlegDB</a></h1></div></div><div class="col-5-12"><div class="pull-right content"><ul><li><a href="/downloads.html">Downloads</a></li><li><a href="/faq.html">FAQ</a></li><li><a href="/documentation.html">Docs</a></li><li><a id="git_icon" href="https://github.com/infoforcefeed/Project-Oleg"><img src="/static/img/git.svg"></img></a></li></ul></div></div></header><div id="main_container"><div class="grid grid-pad"><div class="col-1-1"><div class="content"><h1>Overview</h1><ul><li><a href="#overview">General Overview</a></li><li><a href="#macros">Macros</a></li><li><a href="#enums">Enums</a></li><li><a href="#structures">Structures</a></li><li><a href="#functions">Functions</a></li></ul><h3 id="overview">General Overview</h3><p>OlegDB is a concurrent, pretty fast K/V hash-table with an Erlang frontend. It uses the <a href=\"https://en.wikipedia.org/wiki/MurmurHash\">Murmur3</a> hashing algorithm to hash and index keys. We chose Erlang for the server because it's functional, uses the actor model and the pattern matching is ridiculous.</p><h3 id="macros">Macros</h3><p>{'params': [], 'type': 'DEFINE', 'name': 'VERSION', 'DESCRIPTION': 'The current version of the OlegDB.'}</p><p>{'params': [], 'type': 'DEFINE', 'name': 'KEY_SIZE', 'DESCRIPTION': 'The hardcoded upperbound for key lengths.'}</p><p>{'params': [], 'type': 'DEFINE', 'name': 'HASH_MALLOC', 'DESCRIPTION': 'The size, in bytes, to allocate when initially creating the database. ol_bucket pointers are stored here.'}</p><p>{'params': [], 'type': 'DEFINE', 'name': 'PATH_LENGTH', 'DESCRIPTION': "The maximum length of a database's path."}</p><p>{'params': [], 'type': 'DEFINE', 'name': 'DEVILS_SEED', 'DESCRIPTION': 'The seed to feed into the murmur3 algorithm.'}</p><h3 id="enums">Enums</h3><p>{'params': [('OL_CONSUME_DIR', 'Open database for reading.'), ('OL_SLAUGHTER_DIR', 'Open database in for writing.'), ('OL_CARESS_DIR', 'Open database in appendonly mode.'), ('OL_SLAUGHTER_DIR', "Open database and create directories and dumpfiles if they don't exist.")], 'type': 'ENUM', 'name': 'ol_filemode', 'DESCRIPTION': 'The filemodes to open and manipulate a database with. OR them together to use multiple.'}</p><h3 id="structures">Structures</h3><p>{'params': [('key[KEY_SIZE]', 'The key used for this bucket.'), ('*content_type', 'The content-type of this object. Defaults to "application/octet-stream".'), ('ctype_size', 'Length of the string representing content-type.'), ('data_ptr', "Location of this key's value."), ('data_size', 'Length of the value in bytes.'), ('hash', 'Hashed value of this key.'), ('next', 'Collisions are resolved via linked list. This contains the pointer to the next object in the chain, or NULL.')], 'type': 'STRUCT', 'name': 'ol_bucket', 'DESCRIPTION': "This is the object stored in the database's hashtable. Contains references to value, key, etc."}</p><p>{'params': [('get_db_name', 'A function pointer that returns the path/name.db to reduec code duplication. Used for writing and reading of dump files.'), ('name', 'The name of the database.'), ('path[PATH_LENGTH]', "Path to the database's working directory."), ('dump_file', 'Path and filename of db dump.'), ('rcrd_cnt', 'Number of records in the database.'), ('key_collisions', 'Number of key collisions this database has had since initialization.'), ('created', 'Timestamp of when the database was initialized.'), ('cur_ht_size', 'The current amount, in bytes, of space allocated for storing ol_bucket objects.'), ('**hashes', 'The actual hashtable. Stores ol_bucket instances.')], 'type': 'STRUCT', 'name': 'ol_database', 'DESCRIPTION': 'The object representing a database.'}</p><p>{'params': [], 'type': 'STRUCT', 'name': 'ol_meta', 'DESCRIPTION': 'Structure used to record meta-information about the database.'}</p><h3 id="functions">Functions</h3><p>{'params': [('*path', 'The directory where the database will be stored.'), ('*name', 'The name of the database. This is used to create the dumpfile, and keep track of the database.'), ('filemode', 'The filemode used to interact with the database. See')], 'RETURNS': 'A new database object.', 'type': 'FUNCTION', 'name': 'ol_open', 'DESCRIPTION': 'Opens a database for use.'}</p><p>{'params': [('*database', 'The database to close.')], 'RETURNS': '0 on success, 1 if not everything could be freed.', 'type': 'FUNCTION', 'name': 'ol_close', 'DESCRIPTION': 'Closes a database cleanly, frees memory and makes sure everything is written.'}</p><p>{'params': [('*db', 'Database to retrieve value from.'), ('*key', 'The key to use.')], 'RETURNS': 'A pointer to an ol_val object, or NULL if the object was not found.', 'type': 'FUNCTION', 'name': 'ol_unjar', 'DESCRIPTION': 'Unjar a value from the mayo.'}</p><p>{'params': [('*db', 'Database to retrieve value from.'), ('*key', 'The key to use.'), ('*value', 'The value to insert.'), ('vsize', 'The size of the value in bytes.')], 'RETURNS': '0 on sucess.', 'type': 'FUNCTION', 'name': 'ol_jar', 'DESCRIPTION': "Put a value into the mayo. It's easy to piss in a bucket, it's not easy to piss in 19 jars. Uses default content type."}</p><p>{'params': [('*db', 'Database to retrieve value from.'), ('*key', 'The key to use.'), ('*value', 'The value to insert.'), ('vsize', 'The size of the value in bytes.'), ('*content_type', 'The content type to store, or really anything. Store your middle name if you want to.'), ('content_type_size', 'The length of the content_type string.')], 'RETURNS': '0 on sucess.', 'type': 'FUNCTION', 'name': 'ol_jar_ct', 'DESCRIPTION': "Put a value into the mayo. It's easy to piss in a bucket, it's not easy to piss in 19 jars. Allws you to specify content type."}</p><p>{'params': [('*db', 'Database to retrieve value from.'), ('*key', 'The key to use.')], 'RETURNS': 'Stored content type, or NULL if it was not found.', 'type': 'FUNCTION', 'name': 'ol_content_type', 'DESCRIPTION': 'Retrieves the content type for a given key from the database.'}</p><p>{'params': [('*db', 'Database to retrieve value from.'), ('*key', 'The key to use.')], 'RETURNS': "0 on success, 2 if the object wasn't found.", 'type': 'FUNCTION', 'name': 'ol_scoop', 'DESCRIPTION': 'Removes an object from the database. Get that crap out of the mayo jar.'}</p><p>{'params': [('*db', 'Database to retrieve value from.')], 'RETURNS': 'Uptime in seconds since database initialization.', 'type': 'FUNCTION', 'name': 'ol_uptime', 'DESCRIPTION': 'Gets the time, in seconds, that a database has been up.'}</p></div></div></div></div><div id="busted_pixel"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUA/wA0XsCoAAAACklEQVR4nGNiAAAABgADNjd8qAAAAABJRU5ErkJggg=="></div></body><footer><div class="grid grid-pad"><div class="col-1-2"><div class="content"><ul><li>&copy; Copyright 2014, Quinlan Pfiffer, Kyle Terry</li></ul></div></div><div class="col-1-2"><div class="pull-right content"><ul><li><a href="http://www.redbubble.com/people/qpfiffer/works/11380090-olegdb-graphics">Merch</a></li><li><a href="/credits.html">Credits</a></li><li>Contact: <a href="mailto:shithouse@goatse.cx">shithouse@goatse.cx</a></li></ul></div></div></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-30510579-4', 'olegdb.org');ga('send', 'pageview');</script></html>